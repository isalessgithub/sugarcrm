({className:"dedupit-action",plugins:["Dashlet"],processes:[],loader:!1,processedRecords:0,events:{"click .btn-merge":"mergeSingleRecord","click .btn-merge-selected":"mergeMultipleDuplicates","click .check-for-duplicates":"checkForDuplicates","change .duplicate-checkbox":"showMergeSelectedButtons","click .et-preview-duplicate":"previewDuplicate"},render:function(){this._super("render")},loadData:function(){this.toggleLoader(!0);this.loadDuplicates()},loadDuplicates:function(){var a=this;app.api.call("GET",
    app.api.buildURL("ET_DuplicateFinderProcess/"+this.module+"/"+this.model.get("id")),null,{success:function(b){a.processes=b;a.toggleLoader(!1)}})},toggleLoader:function(a){this.loader==a!=1&&(this.loader=a,this.render())},mergeSingleRecord:function(a){var b=this,d=a.target.getAttribute("data-duplicate-id"),c={};c[this.model.id]=this.model;app.data.createBean(this.module,{id:d}).fetch({success:function(a){c[d]=a;b.openMergeView(c)}})},mergeMultipleDuplicates:function(a){var b=this;this.processedRecords=
    0;a=a.target.getAttribute("data-process-id");var d={};d[this.model.id]=this.model;var c=this.$('input[type="checkbox"][name="'+a+'"]:checked');1>c.length||c.each(function(){app.data.createBean(b.module,{id:this.value}).fetch({success:function(a){d[a.id]=a;b.processedRecords++;b.processedRecords==c.length&&b.openMergeView(d)}})})},openMergeView:function(a){var b=this;app.drawer.open({layout:"merge-duplicates",context:{primaryRecord:this.model.id,selectedDuplicates:a}},function(a){b.loadData()})},checkForDuplicates:function(a){var b=
    this;this.toggleLoader(!0);app.api.call("GET",app.api.buildURL("ET_DuplicateFinderProcess/checkForDuplicates/"+this.module+"/"+this.model.get("id")),null,{success:function(a){1==a.status?b.loadData():b.toggleLoader(!1)}})},showMergeSelectedButtons:function(a){a=a.target.getAttribute("name");2>this.$('input[type="checkbox"][name="'+a+'"]:checked').length?this.$('[data-process-id="'+a+'"]').addClass("hidden"):this.$('[data-process-id="'+a+'"]').removeClass("hidden")},previewDuplicate:function(a){a=
    $(a.target).attr("data-duplicate-id");a=app.router.buildRoute(this.module,a);window.open("#"+a,"_blank")}});