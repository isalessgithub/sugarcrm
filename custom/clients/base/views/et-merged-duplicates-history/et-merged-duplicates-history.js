({className:"et-merged-duplicates-history",plugins:["Dashlet"],loading:!0,retrieving_preview_data:!1,no_duplicates:!0,duplicates_data:{},events:{"click .et-preview-duplicate":"previewDuplicate"},loadData:function(){var a=this,b=a.model.get("id");app.data.createBeanCollection("ET_MergedDuplicates").fetch({limit:1E3,params:{order_by:"date_entered:ASC"},filter:{filter:[{primary_record_id:{$equals:b}}]},success:function(c){0==c.models.length?a.no_duplicates_message=app.lang.get("NTF_DUPLICATES_NOT_FOUND",
            "ET_MergedDuplicates"):($.each(c.models,function(c,b){var d=app.date(b.attributes.date_entered).formatUser();a.duplicates_data[c]={merged_at:d,name:b.attributes.merged_record_desc,id:b.attributes.merged_record_id}}),a.no_duplicates=!1);a.loading=!1;a.render()},error:function(a){app.alert.dismissAll();app.alert.show("server-error",{level:"error",messages:"ERR_GENERIC_SERVER_ERROR",autoClose:!1});app.error.handleHttpError(a)}})},previewDuplicate:function(a){a.preventDefault();var b=this;b.retrieving_preview_data||
    (b.retrieving_preview_data=!0,app.alert.show("duplicate-bean-retrieving",{level:"process",title:app.lang.get("NTF_DUPLICATE_BEAN_RETRIEVING","ET_MergedDuplicates")}),(a=$(a.target).attr("id")||$(a.target).parent("a").attr("id"))?(a={duplicate_module:b.module,duplicate_id:a},app.api.call("create",app.api.buildURL("ET_MergedDuplicates","get-duplicate-data"),a,{success:function(a){b.retrieving_preview_data=!1;if(a.success){var c=app.metadata.getView(b.module,"record");app.drawer.open({layout:"preview-duplicate-bean",
            context:{view_metadata:c,duplicate_bean:a.duplicate_bean,duplicate_module:b.module,module:"ET_MergedDuplicates"}})}else app.alert.dismissAll(),app.alert.show("duplicate-not-found",{level:"error",messages:a.message,autoClose:!1})},error:function(a){app.alert.dismissAll();app.alert.show("server-error",{level:"error",messages:"ERR_GENERIC_SERVER_ERROR",autoClose:!1});app.error.handleHttpError(a);b.retrieving_preview_data=!1}})):(app.alert.dismissAll(),app.alert.show("duplicate-bean-id-missing",{level:"error",
        messages:app.lang.get("NTF_DUPLICATE_BEAN_ID_MISSING","ET_MergedDuplicates"),autoClose:!1})))}});